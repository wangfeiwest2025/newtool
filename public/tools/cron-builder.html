<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cronè¡¨è¾¾å¼ç”Ÿæˆå™¨ - New ToolsHub</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ› ï¸</text></svg>">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/fontawesome-all.min.css">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#007bff">
    <style>
        .cron-builder {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .cron-builder {
                grid-template-columns: 1fr;
            }
        }
        
        .cron-section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        .cron-field {
            margin-bottom: 20px;
        }
        
        .field-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .field-desc {
            font-size: 12px;
            color: #6c757d;
        }
        
        .cron-input {
            width: 100%;
            padding: 12px;
            font-family: 'Consolas', monospace;
            font-size: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .cron-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .cron-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .cron-expression {
            font-family: 'Consolas', monospace;
            font-size: 28px;
            font-weight: bold;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }
        
        .cron-description {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .preset-btn {
            padding: 12px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .preset-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .next-executions {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }
        
        .execution-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .execution-item {
            padding: 10px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .execution-item:last-child {
            border-bottom: none;
        }
        
        .execution-number {
            width: 30px;
            height: 30px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        .execution-time {
            flex: 1;
        }
        
        .tab-buttons {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            background: #f8f9fa;
            padding: 5px;
            border-radius: 8px;
        }
        
        .tab-btn {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .mode-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .mode-btn {
            flex: 1;
            padding: 8px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mode-btn.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        
        .time-range {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .range-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .range-input input {
            width: 60px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .checkbox-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .checkbox-item:hover {
            background: #e9ecef;
        }
        
        .checkbox-item input {
            margin-bottom: 5px;
        }
        
        .checkbox-item.checked {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg" style="background: linear-gradient(135deg, #4361ee, #3f37c9); padding: 1rem 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <div class="container">
            <a class="navbar-brand" href="/" style="color: white; font-weight: 700; display: flex; align-items: center;">
                <i class="fas fa-tools"></i> New ToolsHub
            </a>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="tool-container">
            <div class="tool-header">
                <h1 class="tool-title"><i class="fas fa-calendar-alt"></i> Cronè¡¨è¾¾å¼ç”Ÿæˆå™¨</h1>
                <p class="tool-description">å¯è§†åŒ–ç”Ÿæˆå’Œè§£æCronè¡¨è¾¾å¼ï¼Œæ”¯æŒUnixã€Quartzå’ŒSpringæ ¼å¼ï¼Œé¢„è§ˆæœªæ¥æ‰§è¡Œæ—¶é—´ã€‚</p>
            </div>
            
            <div class="cron-display">
                <div class="cron-expression" id="cronExpression">* * * * *</div>
                <div class="cron-description" id="cronDescription">æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</div>
            </div>
            
            <div class="tab-buttons">
                <div class="tab-btn active" onclick="switchTab('simple')">
                    <i class="fas fa-magic"></i> ç®€å•æ¨¡å¼
                </div>
                <div class="tab-btn" onclick="switchTab('advanced')">
                    <i class="fas fa-cogs"></i> é«˜çº§æ¨¡å¼
                </div>
                <div class="tab-btn" onclick="switchTab('reverse')">
                    <i class="fas fa-exchange-alt"></i> åå‘è§£æ
                </div>
            </div>
            
            <div class="cron-builder">
                <div>
                    <div class="tab-content active" id="simpleTab">
                        <div class="cron-section">
                            <h5 class="mb-3"><i class="fas fa-clock"></i> å¸¸ç”¨é¢„è®¾</h5>
                            <div class="preset-buttons">
                                <div class="preset-btn" onclick="setPreset('0 0 * * *')">
                                    <i class="fas fa-sun"></i> æ¯å¤©é›¶ç‚¹
                                </div>
                                <div class="preset-btn" onclick="setPreset('0 */1 * * *')">
                                    <i class="fas fa-hourglass-start"></i> æ¯å°æ—¶
                                </div>
                                <div class="preset-btn" onclick="setPreset('*/5 * * * *')">
                                    <i class="fas fa-history"></i> æ¯5åˆ†é’Ÿ
                                </div>
                                <div class="preset-btn" onclick="setPreset('0 9 * * 1')">
                                    <i class="fas fa-briefcase"></i> æ¯å‘¨ä¸€æ—©9ç‚¹
                                </div>
                                <div class="preset-btn" onclick="setPreset('0 0 1 * *')">
                                    <i class="fas fa-calendar"></i> æ¯æœˆ1å·
                                </div>
                                <div class="preset-btn" onclick="setPreset('0 0 * * 0')">
                                    <i class="fas fa-church"></i> æ¯å‘¨æ—¥é›¶ç‚¹
                                </div>
                            </div>
                            
                            <h5 class="mb-3"><i class="fas fa-sliders-h"></i> è‡ªå®šä¹‰é¢‘ç‡</h5>
                            <div class="cron-field">
                                <div class="field-label">
                                    <span>æ‰§è¡Œé¢‘ç‡</span>
                                </div>
                                <select id="frequency" class="cron-input" onchange="updateFromFrequency()">
                                    <option value="minute">æ¯åˆ†é’Ÿ</option>
                                    <option value="hour">æ¯å°æ—¶</option>
                                    <option value="day">æ¯å¤©</option>
                                    <option value="week">æ¯å‘¨</option>
                                    <option value="month">æ¯æœˆ</option>
                                </select>
                            </div>
                            
                            <div id="customOptions">
                                <div class="cron-field">
                                    <div class="field-label">
                                        <span>åˆ†é’Ÿ</span>
                                        <span class="field-desc">0-59</span>
                                    </div>
                                    <input type="number" id="customMinute" class="cron-input" min="0" max="59" value="0">
                                </div>
                                
                                <div class="cron-field">
                                    <div class="field-label">
                                        <span>å°æ—¶</span>
                                        <span class="field-desc">0-23</span>
                                    </div>
                                    <input type="number" id="customHour" class="cron-input" min="0" max="23" value="0">
                                </div>
                                
                                <div class="cron-field" id="dayField" style="display:none;">
                                    <div class="field-label">
                                        <span>æ˜ŸæœŸå‡ </span>
                                    </div>
                                    <div class="checkbox-group">
                                        <label class="checkbox-item checked">
                                            <input type="checkbox" value="1" checked> ä¸€
                                        </label>
                                        <label class="checkbox-item checked">
                                            <input type="checkbox" value="2" checked> äºŒ
                                        </label>
                                        <label class="checkbox-item checked">
                                            <input type="checkbox" value="3" checked> ä¸‰
                                        </label>
                                        <label class="checkbox-item checked">
                                            <input type="checkbox" value="4" checked> å››
                                        </label>
                                        <label class="checkbox-item checked">
                                            <input type="checkbox" value="5" checked> äº”
                                        </label>
                                        <label class="checkbox-item">
                                            <input type="checkbox" value="6"> å…­
                                        </label>
                                        <label class="checkbox-item">
                                            <input type="checkbox" value="0"> æ—¥
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="advancedTab">
                        <div class="cron-section">
                            <h5 class="mb-3"><i class="fas fa-edit"></i> å„å­—æ®µè®¾ç½®</h5>
                            
                            <div class="cron-field">
                                <div class="field-label">
                                    <span>åˆ†é’Ÿ (Minute)</span>
                                    <span class="field-desc">0-59, æ”¯æŒ * / , -</span>
                                </div>
                                <input type="text" id="minuteInput" class="cron-input" value="*" onchange="updateExpression()">
                            </div>
                            
                            <div class="cron-field">
                                <div class="field-label">
                                    <span>å°æ—¶ (Hour)</span>
                                    <span class="field-desc">0-23</span>
                                </div>
                                <input type="text" id="hourInput" class="cron-input" value="*" onchange="updateExpression()">
                            </div>
                            
                            <div class="cron-field">
                                <div class="field-label">
                                    <span>æ—¥æœŸ (Day of Month)</span>
                                    <span class="field-desc">1-31</span>
                                </div>
                                <input type="text" id="dayInput" class="cron-input" value="*" onchange="updateExpression()">
                            </div>
                            
                            <div class="cron-field">
                                <div class="field-label">
                                    <span>æœˆä»½ (Month)</span>
                                    <span class="field-desc">1-12</span>
                                </div>
                                <input type="text" id="monthInput" class="cron-input" value="*" onchange="updateExpression()">
                            </div>
                            
                            <div class="cron-field">
                                <div class="field-label">
                                    <span>æ˜ŸæœŸ (Day of Week)</span>
                                    <span class="field-desc">0-7 (0å’Œ7éƒ½æ˜¯å‘¨æ—¥)</span>
                                </div>
                                <input type="text" id="weekdayInput" class="cron-input" value="*" onchange="updateExpression()">
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="reverseTab">
                        <div class="cron-section">
                            <h5 class="mb-3"><i class="fas fa-search"></i> è§£æCronè¡¨è¾¾å¼</h5>
                            <div class="cron-field">
                                <input type="text" id="reverseInput" class="cron-input" placeholder="è¾“å…¥Cronè¡¨è¾¾å¼ï¼Œå¦‚: 0 0 * * *">
                            </div>
                            <button class="btn btn-primary w-100" onclick="parseExpression()">
                                <i class="fas fa-search"></i> è§£æ
                            </button>
                            
                            <div id="parseResult" class="mt-3" style="display:none;">
                                <div class="alert alert-info">
                                    <h6>è§£æç»“æœï¼š</h6>
                                    <p id="parseDescription"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <div class="next-executions">
                        <h5><i class="fas fa-list-ol"></i> æœªæ¥5æ¬¡æ‰§è¡Œæ—¶é—´</h5>
                        <ul class="execution-list" id="executionList">
                            <li class="execution-item">
                                <span class="execution-number">1</span>
                                <span class="execution-time">è®¡ç®—ä¸­...</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="cron-section mt-3">
                        <h5><i class="fas fa-info-circle"></i> Cronè¡¨è¾¾å¼è¯´æ˜</h5>
                        <table class="table table-sm">
                            <tr>
                                <td><code>*</code></td>
                                <td>ä»»æ„å€¼</td>
                            </tr>
                            <tr>
                                <td><code>,</code></td>
                                <td>åˆ—è¡¨ (å¦‚ 1,3,5)</td>
                            </tr>
                            <tr>
                                <td><code>-</code></td>
                                <td>èŒƒå›´ (å¦‚ 1-5)</td>
                            </tr>
                            <tr>
                                <td><code>/</code></td>
                                <td>æ­¥è¿› (å¦‚ */5)</td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="mt-3">
                        <button class="btn btn-success w-100 mb-2" onclick="copyExpression()">
                            <i class="fas fa-copy"></i> å¤åˆ¶è¡¨è¾¾å¼
                        </button>
                        <button class="btn btn-outline-primary w-100" onclick="validateExpression()">
                            <i class="fas fa-check-circle"></i> éªŒè¯è¡¨è¾¾å¼
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>New ToolsHub - Inspired by xJavaFxTool | Comprehensive Developer Tools</p>
        </div>
    </footer>

    <script>
        let currentExpression = '* * * * *';
        
        const descriptions = {
            '* * * * *': 'æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡',
            '0 * * * *': 'æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡',
            '0 0 * * *': 'æ¯å¤©é›¶ç‚¹æ‰§è¡Œ',
            '0 0 * * 0': 'æ¯å‘¨æ—¥é›¶ç‚¹æ‰§è¡Œ',
            '0 0 1 * *': 'æ¯æœˆ1å·é›¶ç‚¹æ‰§è¡Œ',
            '0 0 1 1 *': 'æ¯å¹´1æœˆ1å·é›¶ç‚¹æ‰§è¡Œ',
            '*/5 * * * *': 'æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡',
            '0 */2 * * *': 'æ¯2å°æ—¶æ‰§è¡Œä¸€æ¬¡',
            '0 9 * * 1': 'æ¯å‘¨ä¸€ä¸Šåˆ9ç‚¹æ‰§è¡Œ',
            '0 9-17 * * 1-5': 'å·¥ä½œæ—¥æ¯å°æ—¶æ‰§è¡Œ'
        };
        
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tab + 'Tab').classList.add('active');
        }
        
        function setPreset(expression) {
            currentExpression = expression;
            document.getElementById('cronExpression').textContent = expression;
            document.getElementById('cronDescription').textContent = descriptions[expression] || 'è‡ªå®šä¹‰è¡¨è¾¾å¼';
            updateExecutionList();
            
            // Update inputs
            const parts = expression.split(' ');
            if (parts.length === 5) {
                document.getElementById('minuteInput').value = parts[0];
                document.getElementById('hourInput').value = parts[1];
                document.getElementById('dayInput').value = parts[2];
                document.getElementById('monthInput').value = parts[3];
                document.getElementById('weekdayInput').value = parts[4];
            }
        }
        
        function updateFromFrequency() {
            const freq = document.getElementById('frequency').value;
            const dayField = document.getElementById('dayField');
            
            let expression = '';
            switch(freq) {
                case 'minute':
                    expression = '* * * * *';
                    dayField.style.display = 'none';
                    break;
                case 'hour':
                    expression = `0 ${document.getElementById('customMinute').value} * * *`;
                    dayField.style.display = 'none';
                    break;
                case 'day':
                    expression = `0 ${document.getElementById('customMinute').value} ${document.getElementById('customHour').value} * *`;
                    dayField.style.display = 'none';
                    break;
                case 'week':
                    dayField.style.display = 'block';
                    const checkedDays = Array.from(document.querySelectorAll('#dayField input:checked')).map(cb => cb.value);
                    expression = `0 ${document.getElementById('customMinute').value} ${document.getElementById('customHour').value} * ${checkedDays.length > 0 ? checkedDays.join(',') : '*'}`;
                    break;
                case 'month':
                    dayField.style.display = 'none';
                    expression = `0 ${document.getElementById('customMinute').value} ${document.getElementById('customHour').value} 1 *`;
                    break;
            }
            setPreset(expression);
        }
        
        function updateExpression() {
            const minute = document.getElementById('minuteInput').value || '*';
            const hour = document.getElementById('hourInput').value || '*';
            const day = document.getElementById('dayInput').value || '*';
            const month = document.getElementById('monthInput').value || '*';
            const weekday = document.getElementById('weekdayInput').value || '*';
            
            const expression = `${minute} ${hour} ${day} ${month} ${weekday}`;
            setPreset(expression);
        }
        
        function parseExpression() {
            const input = document.getElementById('reverseInput').value.trim();
            if (!input) return;
            
            const parts = input.split(' ');
            if (parts.length !== 5) {
                alert('Cronè¡¨è¾¾å¼æ ¼å¼ä¸æ­£ç¡®ï¼Œéœ€è¦5ä¸ªå­—æ®µ');
                return;
            }
            
            setPreset(input);
            document.getElementById('parseResult').style.display = 'block';
            document.getElementById('parseDescription').textContent = descriptions[input] || 'è‡ªå®šä¹‰è¡¨è¾¾å¼';
            
            // Update simple tab inputs
            document.getElementById('minuteInput').value = parts[0];
            document.getElementById('hourInput').value = parts[1];
            document.getElementById('dayInput').value = parts[2];
            document.getElementById('monthInput').value = parts[3];
            document.getElementById('weekdayInput').value = parts[4];
        }
        
        function updateExecutionList() {
            const list = document.getElementById('executionList');
            list.innerHTML = '';
            
            const parts = currentExpression.split(' ');
            if (parts.length !== 5) return;
            
            const now = new Date();
            let count = 0;
            let current = new Date(now);
            
            // Simple simulation of next executions
            const executions = [];
            while (count < 5 && executions.length < 100) {
                executions.push(new Date(current));
                
                // Add time based on expression
                if (parts[0] !== '*') {
                    current.setHours(current.getHours() + 1);
                } else {
                    current.setMinutes(current.getMinutes() + 1);
                }
                count++;
            }
            
            executions.forEach((time, index) => {
                const li = document.createElement('li');
                li.className = 'execution-item';
                li.innerHTML = `
                    <span class="execution-number">${index + 1}</span>
                    <span class="execution-time">${time.toLocaleString('zh-CN')}</span>
                `;
                list.appendChild(li);
            });
        }
        
        function copyExpression() {
            ToolsHub.copyToClipboard(currentExpression);
        }
        
        function validateExpression() {
            const parts = currentExpression.split(' ');
            if (parts.length !== 5) {
                alert('è¡¨è¾¾å¼æ ¼å¼ä¸æ­£ç¡®');
                return;
            }
            
            alert('è¡¨è¾¾å¼æ ¼å¼æ­£ç¡®ï¼');
        }
        
        // Checkbox styling
        document.querySelectorAll('.checkbox-item input').forEach(cb => {
            cb.addEventListener('change', function() {
                this.parentElement.classList.toggle('checked', this.checked);
                if (document.getElementById('frequency').value === 'week') {
                    updateFromFrequency();
                }
            });
        });
        
        // Initialize
        window.addEventListener('load', function() {
            updateExecutionList();
        });
    </script>
    <script src="../js/main.js"></script>
</body>
</html>
