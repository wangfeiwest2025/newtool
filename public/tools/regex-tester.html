<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨ - New ToolsHub</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ› ï¸</text></svg>">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/fontawesome-all.min.css">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#007bff">
    <style>
        .regex-builder {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .regex-builder {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        
        .panel-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            font-weight: 600;
        }
        
        .panel-body {
            padding: 20px;
        }
        
        .regex-input-group {
            position: relative;
            margin-bottom: 15px;
        }
        
        .regex-input {
            width: 100%;
            padding: 15px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .regex-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .test-input {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            resize: vertical;
            transition: all 0.3s ease;
        }
        
        .test-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .flags-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .flag-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background 0.2s;
        }
        
        .flag-item:hover {
            background: #e9ecef;
        }
        
        .flag-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .result-display {
            min-height: 200px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            white-space: pre-wrap;
            word-break: break-all;
            overflow: auto;
        }
        
        .match-highlight {
            background: #ffd700;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .match-group {
            background: #90EE90;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .quick-patterns {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        
        .pattern-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .pattern-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            border-color: #667eea;
        }
        
        .pattern-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .pattern-regex {
            font-family: monospace;
            font-size: 12px;
            color: #667eea;
            background: #f0f0f0;
            padding: 5px;
            border-radius: 4px;
            word-break: break-all;
        }
        
        .cheat-sheet {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .cheat-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .cheat-title {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .cheat-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .cheat-item:last-child {
            border-bottom: none;
        }
        
        .cheat-code {
            font-family: monospace;
            color: #667eea;
            font-weight: 600;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .status-valid {
            background: #d4edda;
            color: #155724;
        }
        
        .status-invalid {
            background: #f8d7da;
            color: #721c24;
        }
        
        .match-stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            padding: 15px;
            background: #e9ecef;
            border-radius: 8px;
        }
        
        .stat-box {
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 12px;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg" style="background: linear-gradient(135deg, #4361ee, #3f37c9); padding: 1rem 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <div class="container">
            <a class="navbar-brand" href="/" style="color: white; font-weight: 700; display: flex; align-items: center;">
                <i class="fas fa-tools"></i> New ToolsHub
            </a>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="tool-container">
            <div class="tool-header">
                <h1 class="tool-title"><i class="fas fa-search"></i> æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨</h1>
                <p class="tool-description">æµ‹è¯•ã€éªŒè¯å’Œç”Ÿæˆæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ”¯æŒå®æ—¶åŒ¹é…é«˜äº®æ˜¾ç¤ºï¼Œæä¾›å¸¸ç”¨æ­£åˆ™æ¨¡æ¿ã€‚</p>
            </div>
            
            <div class="panel mb-4">
                <div class="panel-header">
                    <i class="fas fa-code"></i> æ­£åˆ™è¡¨è¾¾å¼è®¾ç½®
                </div>
                <div class="panel-body">
                    <div class="regex-input-group">
                        <label class="form-label">æ­£åˆ™è¡¨è¾¾å¼ï¼š</label>
                        <input type="text" id="regexInput" class="regex-input" placeholder="è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¾‹å¦‚: \d{3}-\d{4}-\d{4}">
                    </div>
                    
                    <div class="flags-group">
                        <label class="flag-item">
                            <input type="checkbox" id="flagGlobal" checked>
                            <span>å…¨å±€åŒ¹é… (g)</span>
                        </label>
                        <label class="flag-item">
                            <input type="checkbox" id="flagIgnoreCase">
                            <span>å¿½ç•¥å¤§å°å†™ (i)</span>
                        </label>
                        <label class="flag-item">
                            <input type="checkbox" id="flagMultiline">
                            <span>å¤šè¡Œæ¨¡å¼ (m)</span>
                        </label>
                        <label class="flag-item">
                            <input type="checkbox" id="flagDotAll">
                            <span>ç‚¹åŒ¹é…æ‰€æœ‰ (s)</span>
                        </label>
                        <label class="flag-item">
                            <input type="checkbox" id="flagUnicode">
                            <span>Unicode (u)</span>
                        </label>
                    </div>
                    
                    <div class="d-flex gap-2">
                        <button id="testBtn" class="btn btn-primary">
                            <i class="fas fa-play"></i> æµ‹è¯•åŒ¹é…
                        </button>
                        <button id="clearBtn" class="btn btn-outline-secondary">
                            <i class="fas fa-trash"></i> æ¸…ç©º
                        </button>
                        <button id="copyBtn" class="btn btn-outline-success">
                            <i class="fas fa-copy"></i> å¤åˆ¶æ­£åˆ™
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="regex-builder">
                <div class="panel">
                    <div class="panel-header" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                        <i class="fas fa-keyboard"></i> æµ‹è¯•æ–‡æœ¬
                    </div>
                    <div class="panel-body">
                        <textarea id="testText" class="test-input" placeholder="åœ¨æ­¤è¾“å…¥è¦æµ‹è¯•çš„æ–‡æœ¬..."></textarea>
                        <div class="mt-2">
                            <button class="btn btn-sm btn-outline-secondary" onclick="loadSample('email')">é‚®ç®±æ ·æœ¬</button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="loadSample('phone')">æ‰‹æœºå·æ ·æœ¬</button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="loadSample('url')">URLæ ·æœ¬</button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="loadSample('ip')">IPæ ·æœ¬</button>
                        </div>
                    </div>
                </div>
                
                <div class="panel">
                    <div class="panel-header" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <i class="fas fa-eye"></i> åŒ¹é…ç»“æœ
                        <span id="statusBadge" class="status-badge status-invalid" style="float: right; font-size: 12px;">æœªåŒ¹é…</span>
                    </div>
                    <div class="panel-body">
                        <div id="resultDisplay" class="result-display">åŒ¹é…ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º...</div>
                        <div class="match-stats" id="matchStats" style="display: none;">
                            <div class="stat-box">
                                <div class="stat-value" id="matchCount">0</div>
                                <div class="stat-label">åŒ¹é…æ•°</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="groupCount">0</div>
                                <div class="stat-label">æ•è·ç»„</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <h4 class="mt-4 mb-3"><i class="fas fa-magic"></i> å¸¸ç”¨æ­£åˆ™æ¨¡æ¿</h4>
            <div class="quick-patterns">
                <div class="pattern-card" onclick="usePattern('email')">
                    <div class="pattern-name">é‚®ç®±åœ°å€</div>
                    <div class="pattern-regex">^[\w.-]+@[\w.-]+\.\w+$</div>
                </div>
                <div class="pattern-card" onclick="usePattern('phone')">
                    <div class="pattern-name">æ‰‹æœºå·</div>
                    <div class="pattern-regex">^1[3-9]\d{9}$</div>
                </div>
                <div class="pattern-card" onclick="usePattern('url')">
                    <div class="pattern-name">URLé“¾æ¥</div>
                    <div class="pattern-regex">^https?://.+</div>
                </div>
                <div class="pattern-card" onclick="usePattern('ip')">
                    <div class="pattern-name">IPåœ°å€</div>
                    <div class="pattern-regex">^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$</div>
                </div>
                <div class="pattern-card" onclick="usePattern('idcard')">
                    <div class="pattern-name">èº«ä»½è¯å·</div>
                    <div class="pattern-regex">^\d{17}[\dXx]$</div>
                </div>
                <div class="pattern-card" onclick="usePattern('date')">
                    <div class="pattern-name">æ—¥æœŸæ ¼å¼</div>
                    <div class="pattern-regex">^\d{4}-\d{2}-\d{2}$</div>
                </div>
                <div class="pattern-card" onclick="usePattern('chinese')">
                    <div class="pattern-name">ä¸­æ–‡å­—ç¬¦</div>
                    <div class="pattern-regex">[\u4e00-\u9fa5]+</div>
                </div>
                <div class="pattern-card" onclick="usePattern('number')">
                    <div class="pattern-name">æ•°å­—</div>
                    <div class="pattern-regex">^\d+$</div>
                </div>
            </div>
            
            <h4 class="mt-4 mb-3"><i class="fas fa-book"></i> æ­£åˆ™è¡¨è¾¾å¼é€ŸæŸ¥è¡¨</h4>
            <div class="cheat-sheet">
                <div class="cheat-section">
                    <div class="cheat-title">å­—ç¬¦ç±»</div>
                    <div class="cheat-item">
                        <span>.</span>
                        <span>ä»»æ„å­—ç¬¦ï¼ˆé™¤æ¢è¡Œï¼‰</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">\d</span>
                        <span>æ•°å­— [0-9]</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">\D</span>
                        <span>éæ•°å­—</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">\w</span>
                        <span>å•è¯å­—ç¬¦ [a-zA-Z0-9_]</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">\W</span>
                        <span>éå•è¯å­—ç¬¦</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">\s</span>
                        <span>ç©ºç™½å­—ç¬¦</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">\S</span>
                        <span>éç©ºç™½å­—ç¬¦</span>
                    </div>
                </div>
                
                <div class="cheat-section">
                    <div class="cheat-title">é‡è¯</div>
                    <div class="cheat-item">
                        <span class="cheat-code">*</span>
                        <span>0æ¬¡æˆ–å¤šæ¬¡</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">+</span>
                        <span>1æ¬¡æˆ–å¤šæ¬¡</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">?</span>
                        <span>0æ¬¡æˆ–1æ¬¡</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">{n}</span>
                        <span>æ°å¥½næ¬¡</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">{n,}</span>
                        <span>è‡³å°‘næ¬¡</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">{n,m}</span>
                        <span>nåˆ°mæ¬¡</span>
                    </div>
                </div>
                
                <div class="cheat-section">
                    <div class="cheat-title">é”šç‚¹</div>
                    <div class="cheat-item">
                        <span class="cheat-code">^</span>
                        <span>å­—ç¬¦ä¸²å¼€å¤´</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">$</span>
                        <span>å­—ç¬¦ä¸²ç»“å°¾</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">\b</span>
                        <span>å•è¯è¾¹ç•Œ</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">\B</span>
                        <span>éå•è¯è¾¹ç•Œ</span>
                    </div>
                </div>
                
                <div class="cheat-section">
                    <div class="cheat-title">åˆ†ç»„</div>
                    <div class="cheat-item">
                        <span class="cheat-code">(abc)</span>
                        <span>æ•è·ç»„</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">(?:abc)</span>
                        <span>éæ•è·ç»„</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">(?=abc)</span>
                        <span>æ­£å‘å‰ç»</span>
                    </div>
                    <div class="cheat-item">
                        <span class="cheat-code">(?!abc)</span>
                        <span>è´Ÿå‘å‰ç»</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>New ToolsHub - Inspired by xJavaFxTool | Comprehensive Developer Tools</p>
        </div>
    </footer>

    <script>
        const regexInput = document.getElementById('regexInput');
        const testText = document.getElementById('testText');
        const resultDisplay = document.getElementById('resultDisplay');
        const statusBadge = document.getElementById('statusBadge');
        const matchStats = document.getElementById('matchStats');
        const matchCount = document.getElementById('matchCount');
        const groupCount = document.getElementById('groupCount');
        
        const flagGlobal = document.getElementById('flagGlobal');
        const flagIgnoreCase = document.getElementById('flagIgnoreCase');
        const flagMultiline = document.getElementById('flagMultiline');
        const flagDotAll = document.getElementById('flagDotAll');
        const flagUnicode = document.getElementById('flagUnicode');
        
        const samples = {
            email: 'è¯·è”ç³» support@example.com æˆ– sales@company.cn è·å–å¸®åŠ©ã€‚',
            phone: 'è”ç³»æ–¹å¼ï¼š13800138000ã€13912345678ã€15098765432',
            url: 'è®¿é—® https://www.example.com æˆ– http://test.site/path?query=1',
            ip: 'æœåŠ¡å™¨åœ°å€ï¼š192.168.1.1ã€10.0.0.1ã€255.255.255.0'
        };
        
        const patterns = {
            email: '^[\\w.-]+@[\\w.-]+\\.\\w+$',
            phone: '^1[3-9]\\d{9}$',
            url: '^https?://.+',
            ip: '^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$',
            idcard: '^\\d{17}[\\dXx]$',
            date: '^\\d{4}-\\d{2}-\\d{2}$',
            chinese: '[\\u4e00-\\u9fa5]+',
            number: '^\\d+$'
        };
        
        function getFlags() {
            let flags = '';
            if (flagGlobal.checked) flags += 'g';
            if (flagIgnoreCase.checked) flags += 'i';
            if (flagMultiline.checked) flags += 'm';
            if (flagDotAll.checked) flags += 's';
            if (flagUnicode.checked) flags += 'u';
            return flags;
        }
        
        function testRegex() {
            const pattern = regexInput.value;
            const text = testText.value;
            
            if (!pattern || !text) {
                resultDisplay.textContent = 'è¯·è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼å’Œæµ‹è¯•æ–‡æœ¬';
                statusBadge.textContent = 'æœªåŒ¹é…';
                statusBadge.className = 'status-badge status-invalid';
                matchStats.style.display = 'none';
                return;
            }
            
            try {
                const flags = getFlags();
                const regex = new RegExp(pattern, flags);
                
                if (flags.includes('g')) {
                    const matches = text.match(regex);
                    if (matches) {
                        let result = text;
                        let offset = 0;
                        const matchData = [];
                        
                        // ä½¿ç”¨execæ¥æ‰¾åˆ°æ‰€æœ‰åŒ¹é…ä½ç½®
                        let match;
                        const tempRegex = new RegExp(pattern, flags.replace('g', ''));
                        const globalRegex = new RegExp(pattern, flags);
                        
                        while ((match = globalRegex.exec(text)) !== null) {
                            matchData.push({
                                text: match[0],
                                index: match.index,
                                groups: match.slice(1)
                            });
                            if (match.index === globalRegex.lastIndex) {
                                globalRegex.lastIndex++;
                            }
                        }
                        
                        // é«˜äº®æ˜¾ç¤º
                        let highlighted = '';
                        let lastIndex = 0;
                        matchData.forEach((m, i) => {
                            highlighted += escapeHtml(text.slice(lastIndex, m.index));
                            highlighted += `<span class="match-highlight" title="Match ${i + 1}">${escapeHtml(m.text)}</span>`;
                            lastIndex = m.index + m.text.length;
                        });
                        highlighted += escapeHtml(text.slice(lastIndex));
                        
                        resultDisplay.innerHTML = highlighted;
                        statusBadge.textContent = `âœ“ æ‰¾åˆ° ${matchData.length} ä¸ªåŒ¹é…`;
                        statusBadge.className = 'status-badge status-valid';
                        matchCount.textContent = matchData.length;
                        groupCount.textContent = matchData[0]?.groups?.length || 0;
                        matchStats.style.display = 'flex';
                    } else {
                        resultDisplay.textContent = text;
                        statusBadge.textContent = 'âœ— æ— åŒ¹é…';
                        statusBadge.className = 'status-badge status-invalid';
                        matchStats.style.display = 'none';
                    }
                } else {
                    const match = text.match(regex);
                    if (match) {
                        const matchedText = match[0];
                        const before = text.slice(0, match.index);
                        const after = text.slice(match.index + matchedText.length);
                        
                        let highlighted = escapeHtml(before) + 
                            `<span class="match-highlight">${escapeHtml(matchedText)}</span>` +
                            escapeHtml(after);
                        
                        resultDisplay.innerHTML = highlighted;
                        statusBadge.textContent = 'âœ“ åŒ¹é…æˆåŠŸ';
                        statusBadge.className = 'status-badge status-valid';
                        matchCount.textContent = '1';
                        groupCount.textContent = match.length - 1;
                        matchStats.style.display = 'flex';
                    } else {
                        resultDisplay.textContent = text;
                        statusBadge.textContent = 'âœ— æ— åŒ¹é…';
                        statusBadge.className = 'status-badge status-invalid';
                        matchStats.style.display = 'none';
                    }
                }
            } catch (e) {
                resultDisplay.textContent = 'æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯: ' + e.message;
                statusBadge.textContent = 'âœ— é”™è¯¯';
                statusBadge.className = 'status-badge status-invalid';
                matchStats.style.display = 'none';
            }
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function loadSample(type) {
            testText.value = samples[type];
            if (patterns[type]) {
                regexInput.value = patterns[type];
            }
            testRegex();
        }
        
        function usePattern(type) {
            regexInput.value = patterns[type];
            testRegex();
        }
        
        // äº‹ä»¶ç›‘å¬
        document.getElementById('testBtn').addEventListener('click', testRegex);
        
        document.getElementById('clearBtn').addEventListener('click', function() {
            regexInput.value = '';
            testText.value = '';
            resultDisplay.textContent = 'åŒ¹é…ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º...';
            statusBadge.textContent = 'æœªåŒ¹é…';
            statusBadge.className = 'status-badge status-invalid';
            matchStats.style.display = 'none';
        });
        
        document.getElementById('copyBtn').addEventListener('click', function() {
            if (regexInput.value) {
                ToolsHub.copyToClipboard(regexInput.value);
            }
        });
        
        // å®æ—¶æµ‹è¯•
        let debounceTimer;
        regexInput.addEventListener('input', function() {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(testRegex, 300);
        });
        
        testText.addEventListener('input', function() {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(testRegex, 300);
        });
        
        [flagGlobal, flagIgnoreCase, flagMultiline, flagDotAll, flagUnicode].forEach(flag => {
            flag.addEventListener('change', testRegex);
        });
        
        // åˆå§‹åŒ–
        window.addEventListener('load', function() {
            regexInput.value = '\\d+';
            testText.value = 'Contact: 13800138000 or 13912345678';
            testRegex();
        });
    </script>
    <script src="../js/main.js"></script>
</body>
</html>
